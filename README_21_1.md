# 1. FBV и CBV

FBV (function based views) — способ обработки запросов путем реализации функций в качестве контроллера.

CBV (class based views) — способ обработки запросов путем реализации классов в качестве контроллеров,
которые являются наследниками от базовых классов.

FBV в контроллере new_app/view.py закоменчены, т.к. FBV предполагает построение функций,


CBV созданы классы, которые наследованны от базовых классов: from django.views.generic import ListView, DetailView

Также в урлах new_app/urls.py прописаны новые пути.
Стоит обратить внимание, что класс в урлах вызвается в дополнение с методом as_view()


# 2. Generics (дженерики) 
CreateView — отвечает за создание объекта. название шаблона: <app_name>/<model>_form.html
DetailView — отвечает за просмотр деталей объекта. название шаблона: <app_name>/<model>_detail.html
UpdateView — отвечает за редактирование объекта. название шаблона: <app_name>/<model>_form.html
DeleteView — отвечает за удаление объекта. название шаблона: <app_name>/<model>_confirm_delete.html
ListView — отвечает за отображение списка объектов. название шаблона: <app_name>/<model>_list.html
TemplateView — не отвечает за работу с объектами, но является очень полезным классом для вывода статических страниц с информацией, 
при этом шаблон нужно указывать вручную.

Дженерики прописали в контроллере приложения new_app/view.py.
Соответсвующий дженерик был импортирован (from django.views.generic)



# 3. Новое приложение Materials
Создаем новое приложение Materials, записываем путь в сеттинг, прописываем модель, делаем миграции,
прописываем контроллеры, добавляем урлы, и создаем шаблоны.

В контроллерах реализуем методы класса:
- Добавляем Счетчик просмотра: в модели добавляем переменную views_count для дальнейшего увеличения.
А также добавляем булевое значение is_published для отображения опубликованных материалов
Добавляем слаг 

Slug - человеко-читаемый адрес, или человеко-понятный урл (в слаге устанавливаем дефолтные значения (Нуллабл))

В контроллере добавляем get_object как метод получения данных (метод наследуется от базового класса)

-Добавляем список материалов, добавляем метод get_queryset как метод получения данных. (при вызове метода от БК нужно передавать args и kwargs)

- Для формирования динамического слага используем метод form_valid.
Для этого устанавливаем для slugify библиотеку pytils и импортируем (from pytils.translit import slugify)
Данный метод обработки данных.

- Предыдущий метод (form_valid) добавляется в класс UpdateView
добавляем метод get_success_url , импортируем reverse (from django.urls), в реверс передаем args=(self.kwargs.get('pk'))


# 4. Реализуем CRUD

1. CREATE.
В контроллере главного прилодения добавили класс StudentCreateView:
- через который создаем Модель и прописываем поля для заполнения.
- данный класс добавляем в урлы
- создаесм шаблон,в  котором указываем метод post, токен {% csrf_token %} и форму {{ form.as_p }}
- также в шаблоне к разделу form дописываем enctype="multipart/form-data"> 
что позволяет загружать файлы и текстовые данные (<form method="post" enctype="multipart/form-data">)

2. READ.
У нас уже реализованы контроллеры для одного и для всех студентов:
   (path('view/<int:pk>/', StudentDetailView.as_view(), name='student_detail'))
   (path('', StudentListView.as_view(), name='index'))
Изменили название шаблона с index на student_list
И из контроллера у классова StudentListView и StudentDetailView убрали переменную template_name 
(т.к.: В случае когда название шаблона описано по правилу названиемодели_действиеконтроллера классу-контроллеру не нужно описывать путь к шаблону)

3. в шаблон student_detail добавили вывод аватарки (картинки)

3. UPDATE.
Создаем класс аналогичный StudentCreateView. Точно также прописываем его в урлы, но с добавлением pk,
в шаблоне student_list добавляем путь к редактированию (также по pk) {% url 'new_app:update_student' object.pk %}

4. DELETE.
Добавляем в контроллер класс StudentDeleteView, прописываем путь в урлах, создаем шаблон student_confirm_delete.html 
(пример взяли из шаблона materials_confirm_delete.html), в шаблоне student_list добавили кнопку для перехода на шаблон удаления

# 5. Реализуем смену статуса
Поскольку у нас в модели Student уже есть атрибут is_active, то 
В Контроллере реализована функция toggle_activity через FBV
добавлен путь в урлах и прописано условие в шаблоне student_list, активный студент или нет.
